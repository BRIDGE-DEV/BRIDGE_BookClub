#01. 리팩터링의 첫 단계

##리팩터링의 첫 단계
>리팩터링하기 전에 제대로 된 테스트부터 마련한다. 테스트는 반드시 자가진단하도록 만든다.
자가진단이 필수라고 하는 것에는 이유가 있기 마련인데, 내 경험상 모든 라이브 관련 동작들은 변경이 매우매우 많이 존재했다.
저자가 이야기하는 부분은 아마 얼마나 이해하고 있고 해당 부분에 대해 유지보수를 꾸준히 할 생각이 있는가를 물어본 듯 하다.
영원한 것은 없다고 믿기에 과거의 내가 만들었던 코드를 다시 마주할 날이 온다.
반 년이 지나버린 상황에서 기억을 믿을 수 없고, 이어서 코드 수정으로 연결된다면 밤샘 당직을 약속하는 것과 다름이 없기 때문이다.
리팩터링을 이야기하기 이전부터 테스트 코드에 대한 이야기를 적는 것으로 보아 매우 중요한 듯 하다.

+실제에서도 많이 쓰고 있다. 테스트 코드 빌드에서만 몇 시간 걸린다는 이야기를 들은 적도 있고, 나 역시도 아침마다 테스트 코드를 확인하고 있다.
	+귀찮음이 굉장히 크게 작용하고 있었지만 조금 더 시간을 들여야겠다.

##리팩터링
###함수 추출하기,변수 인라인하기, 임시 변수 제거하기, 이름 짓기
추출, 쪼개기, 인라인, 제거 이러한 것들이 리팩터링에서 이루어지는 대부분의 작업들이다.
실수를 하지 않는 이상 메모리 사용량에 대한 변화는 미미할 것이고, 걱정이 되는 부분이라하면 휴먼 에러이다.
그렇기에 저자는 테스트 코드에 대한 중요성을 다시 한 번 설명하고 있고 매 차례 돌려볼 것을 권유한다. 나 또한 그래야한다고 생각한다.
대부분의 사람들은 가볍게 지나치기 마련이다. 시간이 부족하거나 자신이 변경한 것에 대해 지나치게 믿고 있기에.

>아주 최근에 마감 전날에 변경 요청이 들어온 것이 있었다. 이미 뇌는 지쳐 녹아있는 상태였고, 나보다 해당 컨텐츠를 잘 아는 사람이 없었다.
>작업에 들어가면서 요청 사항을 수정하고 리뷰를 진행하였다. 그리고 여기서 실수가 잡혀버렸다.
>내가 생각하기에 당연히 수정에 들어갈 범주였지만 팀장님께서는 '이유가 없다면 건드리시지 마세요.' 였다.
>차분해지고 되돌아보니 예외 케이스가 존재했고, 유닛 테스트를 돌리기에는 부족한 시간이었기에 수정 작업에는 실패한 부분이었다.
>해당 작업이 리팩터링은 아니다. 하지만 코드를 수정함에 있어 위의 4가지 예시들을 사용하고 있었고 이것이 마구잡이로 쓰이지 않아야한다는 예시가 될 수 있었다.

예시를 보다보면 가장 중요한 것은 이름 짓기이고, 객체지향에 대해 부족했다는 것이 더 확실해진다.
그렇다면 해야할 일은 저자와 마찬가지로 코드 파악이 중점이라고 본다. 
'적절한 이름의 작은 함수들'로 만들기까지에는 명확한 이해가 필요하고 그 다음이 리팩터링 기법이 아닐까.

+리팩터링 이전에 이해가 중요하다는 것이 중점이라고 본다.
	+기법들이 다양하지만 이것도 객체지향이 되어있을 때의 이야기.
	+실질적으로 내가 작성한 코드들의 대부분은 리팩터링의 대상이 되고, 여기서 나아가본다면 최초 구조를 잘 짜야만 한다로 이어지는 듯 하다.
	+그리고 테스트 코드와 리팩터링 방법들