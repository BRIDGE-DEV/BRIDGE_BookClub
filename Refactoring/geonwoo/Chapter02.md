#02. 리팩터링 원칙

##리팩터링하다가 코드가 깨져서 며칠이나 고생했다.
라고 한다면 이 분은 잘못한 것이 분명하다. 전과 후의 코드가 동일하지 않은 상태로 넘어가게 된다면 대참사가 일어날 것이 분명해진다.
그래서 리팩터링의 원칙과 목적이 분명한 것임을 기억해두자.

##두 개의 모자
기능 추가, 리팩터링 두 가지로 나뉘는 작업은 옳은 이야기이다. 허나 사람은 이런 부분을 놓치기 마련이고, 어느새 두 개의 모자를 겹쳐쓰기 일수이다.
여기서 가장 간단한 방법은 리비전을 나누는 것이었다. 깃헙이나 퍼포스를 이용한다면 자신이 맡은 일감을 쪼개야만 한다.
하나의 큰 작업을 기준으로 전부 수정해서 올리게 되면 실수가 발생했었다. 서브밋하지 않아도 되는 부분이라던가, 줄바꿈 처리만 들어간 cs 파일이라던가.
이런 것들을 세세하게 확인할 수 없다면 애초에 작업 단위를 쪼개는 것이 좋다고 생각한다.
그렇게 된다면 자연스레 모자를 나눠쓰지 않을까 싶다.

##3의 법칙
주니어의 입장에서 최초 설계는 매우 중요하다. 이후에 이어지는 작업들이 대부분 설계를 제대로 잡지 못하여 리팩터링으로 이루어지거나 리뷰에서 무수한 악수 요청을 받기 마련이다.
코드를 깔끔하게 만드는 것에는 숙련된 실력과 경험이 필요하다고 생각한다. 무작정 긴 함수를 잘게 나누거나 세부 코드는 때로 독이 될 수도 있다고 본다.
그렇기에 무작정 리팩터링을 시작하기보다는 3의 법칙을 따르거나 서머리를 남기는 버릇을 들여보는 것은 어떤가 싶다.
생각한 코드를 함수로 쪼개고 기능을 추가하다보면 명확해지지 않을 때가 있다. 이럴 땐 주석보다는 함수 머리에 서머리를 적어서 하고자하는 행동을 정리해본다면 나와 같은 주니어들에게는 오히려 쉽고 실수를 줄일 수 있는 방향으로 이끄는 표지가 될 수 있을 때가 많다.

>'리팩터링 하지 말아야할 때'가 바로 책을 읽으며 걱정했던 부분들을 속 시원하게 이야기해주는 부분이 되는 듯 하다. 정말 해당 부분에 대해 제대로 된 이해가 필요하다.

## 리팩터링 시 고려할 문제
코드 소유권이 가장 무섭지 않나 싶다. 다방면으로 사용 중인 함수라면 필히 모든 곳을 다 훑어봐야만 한다. 하지만 그럼에도 놓치는 부분이 많이 있다. 
어떠한 함수가 참조되는 곳이 하나의 솔루션이 아닐 수도 있다. 공용으로 쓰는 것은 게임에선 운영툴이 될 수도, 서버가 될 수도, 클라에서도. 모든 곳을 다 훑어보기는 쉽지 않다.
그러니 대규모 시스템 개발 시에는 조심해야할 것이라고 생각한다.

그 외의 테스팅, 레거시, 브랜치, 데이터베이스의 경우 정말 큰 규모의 코드 작업을 할 경우에 필요시 되는 부분이라고 생각된다.
게임 업계에서도 과연 데이터베이스 리팩터링을 할 수 있는가... 실제로 하는 경우가 있는가?도 매우 궁금하긴하다.

+원칙 두 가지는 중요하다.
	+기능 추가 / 리팩터링의 분리
	+이것은 모든 작업에서도 마찬가지이다. 원래 목적을 잃지말고 진행하려던 부분만 건드리자.
	+코드가 깨졌다는 것, 테스팅이 정상적이지 않다는 것은 리팩토링 할 시간이 아니라는 것.