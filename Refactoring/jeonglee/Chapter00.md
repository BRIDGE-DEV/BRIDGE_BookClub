## Refactoring(preface)

리팩터링은 스몰토크 커뮤니티에서 처음 등장하여 차츰 프레임워크 개발에서 필수 요소가 되었다.

프레임워크 개발자들은 클래스의 상속 구조를 개선하거나 코드의 중복을 없애는 과정에서도 리팩터링은 빠지지 않는다.

이는 자신의 프레임워크가 처음부터 완벽하지 않다는 것을 잘 알고 경험을 쌓아가면서 개선되리라 확신하기 때문이다.

또한 프로그래머는 코드를 짜는 시간보다 수정하고, 읽는 시간이 더 많다는 것을 알기에 코드 자체를 이해하고 수정하기 쉽게 짜는 것이 매우 중요한데 그 열쇠가 바로 리팩터링이다.

리팩터링에도 위험이 따른다.

리팩터링이란 동작하는 코드를 수정하는 것이고, 그 과정에서 미묘한 버그가 생길 수 있다.

이를 위해 반드시 **테스트 코드**를 작성해야 한다.

읽으면서 되게 뻔한 내용이 있을 수 있지만 방심하지 말아야 한다.

각 기법의 절차를 이해해야지만 절제된 리팩터링을 할 수 있다.

책에서도 나오지만 책을 읽는 것만으론 아무런 의미가 없다.

실제로 사용해보고 몸으로 느껴야 한다.

### 잘 돌아가는 코드는 손대는 게 아니다 vs 리팩터링

물론 오래된 레거시 코드가 있을 때 시스템의 핵심적인 부분이라면 객체지향적으로 유리한 래퍼를 사용하여 건들지 않을 수 있다.

하지만 프로젝트성과 사용화되어 서비스될 소프트웨어의 본질이 조금 다르다고 생각한다.

게임잼, 6개월 R&D 프로젝트, 1년 프로젝트는 설계 자체에 대한 고민이 높은 레벨까지 가지 않는다고 생각한다.

반대로 몇십년간 서비스되는 소프트웨어 예를 들어 메이플의 경우는 자체엔진이긴 하지만 분명하게 리팩터링을 몇번 씩 진행했을 것이라 생각한다.

역 피라미드의 형태로 제작된 프로젝트는 잘 쌓는다고 해결되는 문제가 아니다.

기반이 탄탄하지 못하기 때문에 차라리 다시 만드는게 현명하다..

실제로 나도 그런 프로젝트에 참여해본 경험이 있고, 코드 자체가 너무 복잡해서 불가능에 가까웠다.

선택과 집중이 필요한 시기엔 결단이 필요한 법..

이런 고질적인 문제를 해결하기 위해선 **리팩터링**이 필요하다.

### 리팩터링이란?

리팩터링이란 한마디로 API는 변경하지 않되 세부 사항을 변경하는 것이다.

즉, 겉으로 드러나는 코드는 바꾸지 않으면서 내부 구조를 개선하는 것

역설적으로 리팩터링이 가능하려면 코드가 제대로 동작해야 한다는 것을 의미한다.

이런 생각때문인지 일단 동작하게 하려고 구조를 전혀 생각하지 않고 코딩하는 경우가 종종 있는데 나중에 몇배로 고생하는..

또한 클린 코드에서 말한 테스트 코드의 중요성이 여기서 또 등장하는데 코드가 제대로 동작하는지 체크할 수 있는 테스트 코드가 있다면 리팩터링에 대한 위험성을 많이 줄일 수 있다.

> 공학에 가깝던 코딩이 점점 해킹에 가까워진다.

### 읽기전에

프로그래머의 필독서로 평가 받는 리팩터링..

1장은 작은 프로그램을 직접 리팩터링하는 과정을 보여준다.

이 과정을 **반드시** 제대로 이해하고 넘어가야 한다.

2장은 일반 원칙, 정의, 당위성에 대해 설명한다.

그리고 리팩터링과정의 문제점을 몇 가지 소개한다.

3장은 코드 악취에 대해 말하고, 4장은 테스트를 작성하는 방법을 수록했다.

이어서 리팩터링 카탈로그가 이 책의 핵심으로 대부분의 개발자가 익혀야 할 필수 리팩터링을 담고있다.

책에 등장하는 코드는 자바 스크립트로 이뤄져 있지만 다른 언어로도 충분히 읽을 수 있다.

- 리팩터링이 뭔지 모른다면 1장을 읽자
- 리팩터링을 해야하는 이유를 모른다면 1장과 2장을 읽자
- 리팩터링해야 할 곳을 찾고 싶을 때는 3장을 읽자
- 리팩터링을 실습하고 싶다면 1장부터 4장까지 꼼꼼히 읽고 나머지는 훑어보자
