# Chapter 04 테스트 구축하기

생성일: 2023년 8월 17일 오후 3:28

모든  테스트를 완전히 자동화하고 그 결과까지 스스로 검사하게 만들자.

테스트 스위트는 강력한 버그 검출 도구로, 버그를 찾는 데 걸리는 시간을 대폭 줄여준다.

### 테스트 주도 개발 (TDD)

테스트를 작성하고, 테스트를 통과하게끔 코드를 작성하고, 결과 코드를 최대한 깔끔하게 리팩터링하는 과정을 짧은 주기로 반복한다.

테스트 - 코딩 - 리팩터링 과정을 한 시간에도 여러 차례 진행하기 때문에 코드를 대단히 생산적이면서도 차분하게 작성할 수 있다.

### 테스트의 목적

현재 혹은 향후에 발생하는 버그를 찾는 것

→ 단순히 필드를 읽고 쓰기만 하는 접근자는 테스트할 필요가 없다.

테스트를 너무 많이 만들다 보면 오히려 필요한 테스트를 놓치기 쉽다. 과유불급!

완벽하게 만드느라 테스트를 수행하지 못하느니, 불완전한 테스트라도 작성해 실행하는 게 낫다.

### 기존 코드를 검사하는 테스트를 추가할 때

1. 임시값 설정하기
2. 실제 값으로 대체하기
3. 오류를 심기
4. 테스트 후 오류를 되돌리기

### 테스트끼리 상호작용하게 하는 공유 픽스처

테스트 관련 버그 중 가장 지저분한 유형

테스트를 실행하는 순서에 따라 결과가 달라질 수 있다.

→해결 방법: 개별 테스트를 실행할 때마다 픽스터를 새로 만들기. 모든 테스트를 독립적으로 구성할 수 있어서, 결과를 예측할 수 없어 골치를 썩는 사태를 예방 

### 경계 조건 검사하기

스스로 작성한 코드를 적으로 돌린다.

의식적으로 프로그램을 망가뜨리는 방법을 모색하는 마음 자세가 생산성과 재미를 끌어올려준다.

### 실패와 에러

실패: 검증 단계에서 실제 값이 예상 범위를 벗어났다는 뜻

에러: 검증보다 앞선 과정에서 발생한 예외 상황

리팩터링은 겉보기 동작에 영향을 주지 않아야한다. 경계 조건에 대응하는 동작이 리팩터링 때문에 변하는지는 신경 쓸 필요없다. (그런 오류는 겉보기 동작에 해당하지 않기 때문에)

하지만 그런 오류로 디버깅하기 어려운 문제가 생긴다면, 어서션 추가하기를 적용해서 오류가 빨리 드러나게 할 수 있다.

어차피 모든 버그를 잡아낼 수는 없다고 생각하여 테스트를 작성하지 않는다면 대다수의 버그를 잡을 수 있는 기회를 날리는 셈이다.

### 테스트를 작성할 부분 찾기

- 코드에서 처리 과정이 복잡한 부분
- 함수에서 오류가 샐길만한 부분

이 장에서 보여준 테스트는 단위 테스트에 해당한다.

단위 테스트란 코드의 작은 영역만을 대상으로 빠르게 실행되도록 설계된 테스트다.

버그를 발견하는 즉시 발견한 버그를 명확히 잡아내는 테스트부터 작성하는 습관을 들이자.

### 논의사항

평소에 게임 개발할 때 테스트를 작성하시나요? 

게임 개발은 QA직군이 테스트를 한다고 알고 있었는데 게임 테스트도 모두 자동화 할 수 있을까요?