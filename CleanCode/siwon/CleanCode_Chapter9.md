# CleanCode_Chapter9

# CHAPTER 9 : 단위 테스트

## 내용 정리

---

### TDD 법칙 세 가지

- 첫째 법칙
    - 실패하는 단위 테스트를 작성할 때까지 실제 코드를 작성하지 않는다.
- 둘째 법칙
    - 컴파일은 실패하지 않으면서 실행이 실패하는 정도로만 단위 테스트를 작성한다.
- 셋째 법칙
    - 현재 실패하는 테스트를 통과할 정도로만 실제 코드를 작성한다.

하지만 실제 코드와 맞먹을 정도로 방대한 테스트 코드는 심각한 관리 문제를 유발하기도 한다.

### 깨끗한 테스트 코드 유지하기

- 테스트는 유연성, 유지 보수성, 재사용을 제공한다.
    
    테스트 케이스가 있으면 변경이 쉬워지기 때문이다.
    
    테스트 케이스가 없다면 모든 변경이 잠정적인 버그이다. 
    
- 가독성 있게 작성하라

### 도메인에 특화된 테스트 API

- 시스템 조작 API를 사용하는 대신 API 위에다 함수와 유틸리티를 구현한 후 그 함수와 유틸리티를 사용해서 테스트를한다. 이를 테스트 API라고 한다.
- 테스트 API 코드에 적용하는 표준은 실제 코드에 적용하는 표준과 확실히 다르다. 실제 코드만큼 효율적인 필요는 없다.

### 테스트 함수 하나당 한 개념만 테스트하라

- 잡다한 개념을 연속으로 테스트하는 긴 함수는 피한다.
- 여러 개념을 한 함수로 몰아 넣으면독자가 각 절이 거기에 존재하는 이유와 각 절이 테스트하는 개념을 모두 이해해야 한다.

### F.I.R.S.T

깨끗한 테스트는 다음 다섯가지 규칙을 따른다.

1. Fast - 테스트는 자주 돌리기 위해 빨라야 한다.
2. Independent - 각 테스트는 서로 의존하면 안된다. 한 테스트가 다음 테스트가 실행될 환경을 준비해서는 안 된다. 각 테스트는 독립적으로 그리고 어떤 순서로 실행해도 괜찮아야 한다. 테스트가 서로에게 의존하면 하나가 실패할때 나머지도 잇달아 실패하므로 원인을 진단하기 어려워지고 후반 테스트가 찾아내야 할 결함이 숨겨진다.
3. Repetable - 테스트는 어떤 환경에서도 반복 가능해야 한다. 테스트가 돌아가지 않는 환경이 하나라도 있다면 실패 이유를 둘러댈 변명이 생긴다. 환경이 지원되지 않기에 수행하지 못하는 상황에 직면한다.
4. Self-Validationg - 테스트는 bool 값으로 결과를 내야 한다. 성공 아니면 실패다. 그렇지 않다면 판단은 주관적이 되며 지루한 수작업 평가가 필요하게 된다.
5.  Timely - 테스트는 적시에 작성해야 한다. 단위 테스트는 테스트하려는 실제 코드를 구현하기 직전에 구현한다.

### 결론

테스트 코드는 실제 코드만큼이나 프로젝트에 중요하다. 실제 코드의 유연성, 유지보수성, 재사용성을 보존하고 강화하기 때문이다. 지속적으로 꺠끗하게 관리해야한다. 표현력을 높이고 간결하게 정리해라.

## 느낀 점

---

테스트 코드를 실제 코드를 만들기 직전에 만들어야 된다는 말에 놀랐다. 기존 의미와 다르게 순서를 뒤바꾸어야 한다니 몰랐다. 실패할 경우의 수를 염두에 두고 코드를 작성하면 확실히 번거로운 과정을 줄이고 좀 더 신중하게 코드를 작성하도록 만들 것 같다.

## 논의 내용

---

테스트 시간이 실제 구현 시간을 벗어나게 되는 경우에 대해서 어떻게 생각하세요?