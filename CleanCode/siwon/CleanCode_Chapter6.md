# CleanCode_Chapter6

# ****CHAPTER 6 : 객체와 자료 구조****

## 내용정리

---

### 자료 추상화

변수 사이에 함수라는 계층을 넣는다고 구현이 저절로 감춰지지 않는다. 구현을 감추려면 추상화가 필요하다. 

추상 인터페이스를 제공해 사용자가 구현을 모른 채 자료의 핵심을 조작할 수 있어야 진정한 의미의 클래스다. 

자료를 세세하게 공개하기보다는 추상적인 개념으로 표현하는 편이 좋다. 인터페이스나 조희/설정 함수만으로는 추상화가 이루어지지 않는다.

아무 생각 없이 조회/설정 함수를 추가하는 방법이 가장 나쁘다

### 자료/객체 비대칭

객체는 추상화 뒤로 자료를 숨긴 채 자료를 다루는 함수만 공개한다.

자료 구조는 자료를 그대로 공개하며 별다른 함수는 제공하지 않는다.

두 정의는 본질적으로 상반된다.

> (자료 구조를 사용하는) 절차적인 코드는 기존 자료 구조를 변경하지 않으면서 새 함수를 추가하기 쉽다. 반면, 객체 지향 코드는 기존 함수를 변경하지 않으면서 새 클래스를 추가하기 쉽다.
> 

### **디미터 법칙**

모듈은 자신이 조작하는 객체의 속사정을 몰라야 한다.

클래스 C의 메서드 f는 다음과 같은 객체의 메서드만 호출해야한다.

1. 클래스C
2. f가 생성한 객체
3. f 인수로 넘어온 객체
4. C 인스턴스 변수에 저장된 객체

하지만 위 객체에서 허용된 메서드가 반환하는 객체의 메서드는 호출하면 안된다. → 기차 충돌

- **기차 충돌**

```jsx
final String outputDir = ctxt.getOptions().getScratchDir().getAbsolutePath();

// 나눈 것
Options opts = ctxt.getOptions();
File scratchDir = opts.getScratchDir();
final String outputDir = scratchDir.getAbsolutePath();

// 디미터 법칙 준수
final String outputDir = ctxt.options.scratchDir.absolutePath;
```

자료 구조는 무조건 함수 없이 공개 변수만 포함하고, 객체는 비공개 변수와 공개 함수를 포함하는 것이 좋다.

- **잡종 구조**

절반은 객체, 절반은 자료 구조인 구조. 새로운 함수는 물론이고 새로운 자료 구조도 추가하기 어렵다.

- **구조체 감추기**

만약 ctxt, options, scratchDir이 진짜 객체라면 기차 충돌 처럼 엮어서는 안된다. 객체는 내부구조를 감춰야한다.

### 자료 전달 객체

자료 구조체를 때로는 자료 전달 객체(DTO)라고 한다. 자료 구조체의 전형적인 형태는 공개 변수만 있고 함수가 없는 클래스이다. 

DTO는 데이터베이스와 통신하거나 소켓에서 받은 메시지의 구문을 분석할 때 유용하다. 

DTO는 데이터베이스에 저장된 가공되지 않은 정보를 애플리케이션 코드에서 사용할 객체로 변환하는 일련의 단계에서 가장 처음으로 사용하는 구조체이다.

일반적인 형태는 bean 구조다. 비공개 변수를 조회/설정 함수로 조작한다. 별다른 이익을 제공하진 않는다.

- 활성 레코드

DTO의 특수한 형태다. 공개 변수가 있거나 비공개 변수에 조회/설정 함수가 있는 자료 구조지만, 대게 save나 find와 같은 탐색 함수도 제공한다. 데이터베이스 테이블이나 다른 소스에서 자료를 직접 변환한다.

### 결론

시스템을 구현할 때, 새로운 자료타입을 추가하는 유연성이 필요하면 객체가 적합하고, 새로운 동작을 추가하는 유연성이 필요하면 자료 구조와 절차적인 코드가 더 적합하다.

## 느낀 점

---

시스템의 전체적인 구조를 파악하여 유연성을 구분하는 능력이 중요한 것 같습니다. 이는 시니어 개발자가 되어가는 과정에서 자연스레 기를 수 있는 능력일까요? 정안님이 저번에 말씀하신 소프트웨어 아키텍처라는 책도 읽어보고 싶다는 생각이 같이 들었습니다. 일단은 어색하고 잘 모르겠어도 이런 법칙들을 잘 적용한 코드들을 눈에 익숙하게 만들어야겠습니다.

## 논의 내용

---

잡종구조는 주로 어떨 때 생기는 걸까요? 활용하는 방법이 있지 않을까요?