# Chapter02.이상한나라의객체

# 정리

---

객체를 발견하고 창조하는 것은 지식과 행동을 구조화하는 문제다.

## 객체지향과 인지능력

객체지향은 세상을 자율적으로 독립적인 객체들로 분해할 수 있는 인간의 기본적인 인지 능력에 기반을 두고 있다.

인간의 인지 능력은 물리적인 한계를 넘어 개념적으로 경계 지을 수 있는 추상적인 사물까지도 객체로 인식할 수 있게 한다. ex) 동일한 금액을 2번 이체하더라도 각 이체는 구분 가능.

객체지향 패러다임의 목적은 현실 세계를 모방하는 것이 아니라 현실 세계를 기반으로 새로운 세계를 창조하는 것이다.

소프트웨어 세계에서 살아가는 객체는 현실 세계에 존재하는 개체와 전혀 다른 모습을 보인다.

## 객체, 그리고 이상한 나라

### 앨리스 객체

- 앨리스는 상태(키)를 가지며 상태는 변경 가능하다.
- 앨리스의 **상태를 변경시키는 것은** 앨리스의 **행동이다.**
    - 행동의 결과는 상태에 의존적이며 상태를 이용해 서술 가능.
    - 행동의 순서가 결과에 영향을 미친다.
- 앨리스는 어떤 상태에 있더라도 유일하게 식별 가능하다.

이상한 나라의 앨리스가 객체지향 세계의 객체들과 중요한 공통점 몇가지를 공유한다.

## 객체, 그리고 소프트웨어 나라

하나의 개별적인 실체로 **식별 가능한** 물리적인 또는 개념적인 **사물**은 ****어떤 것이라도 **객체**가 될 수 있다. 생성 시점을 알 수 있고, 독립적인 하나의 단위로 인식할 수 있는 모든 사물은 객체다.

### 객체가 지닌 특성

- 상태
- 행동
- 식별자

소프트웨어 안에서 객체는 저장된 상태와 실행 가능한 코드를 통해 구현된다.

### 상태

상태를 이용하면 행동의 결과를 쉽게 예측하고 설명할 수 있다. 인지 과부하를 줄일 수 있는 중요한 개념.

**프로퍼티**

숫자, 문자열, 양, 속도, 시간, 날짜, 참/거짓과 같은 단순한 값들은 객체가 아니다. 독립적인 의미를 가지기보다 다른 객체의 특성을 표현하는데 사용. 객체의 상태를 구성하는 모든 특징을 객체의 프로퍼티라고 한다.

상태는 특정 시점에 객체가 가지고 있는 정보의 집합으로 객체의 구조적 특징을 표현한다. 객체의 상태는 객체에 존재하는 정/동적인 프로퍼티 값으로 구성된다.

단순한 값과 다른 객체를 참조하는 링크로 구분가능하다.

객체는 다른 객체의 상태에 직접적으로 접근, 변경 할 수 없다. 자율적인 객체는 스스로 자신의 상태를 책임져야 한다. 간접적으로 객체의 상태를 변경하거나 조회할 수 있는 방법이 필요하다. 이것이 행동이다. 객체는 스스로의 행동에 의해서만 상태가 변경되는 것을 보장함으로써 객체의 자율성을 유지한다.

### 행동

객체가 취하는 행동은 자신의 상태를 변경시킨다. 즉, 부수효과를 초래한다.

**객체의 행동은 객체의 상태를 변경시키지만 행동의 결과는 객체의 상태에 의존적이다.**

객체의 행동은 상태에 영향을 받는다.

객체의 행동은 상태를 변경시킨다.

### 협력과 행동

객체의 행동으로 인해 발생하는 결과

- 객체 자신의 상태 변경
- 행동 내에서 협력하는 다른 객체에 대한 메시지 전송

행동이란 외부의 요청 또는 수신된 메시지에 응답하기 위해 동작하고 반응하는 활동이다. 객체는 **행동을 통해 다른 객체와의 협력에 참여하므로 행동은 외부에 가시적이어야 한다.**

### 캡슐화

객체가  외부로 노출하는 것은 행동뿐이며, 접근할 수 있는 방법 또한 행동뿐이다.

상태를 외부에 노출 시키지 않고 행동을 경계로 캡슐화 하는 것은 결과적으로 객체의 자율성을 높인다.

### 식별자

객체를 서로 구별할 수 있는 특정한 프로퍼티. 모든 객체는 식별자를 가지며 이를 이용해 구별할 수 있다.

객체는 시간에 따라 변경되는 상태를 포함하며, 행동을 통해 상태를 변경한다. 따라서 객체는 가변 상태를 가진다고 한다. 타입이 같은 두 객체의 상태가 완전히 똑같더라도 두 객체는 독립적인 별개의 객체로 다뤄야 한다.

값은 식별자를 가지지 않기 때문에 상태를 이용한 동등성 검사를 통해 두 인스턴스를 비교해야 한다. 

- 객체는 상태를 가지며 상태는 변경 가능하다.
- 객체의 상태를 변경시키는 것은 객체의 행동이다.
    - 행동의 결과는 상태에 의존적이며 상태를 이용해 서술할 수 있다.
    - 행동의 순서가 실행 결과에 영향을 미친다.
- 객체는 어떤 상태에 있더라도 유일하게 식별 가능하다.

### 기계로서의 객체

객체의 상태를 조회하는 작업을 쿼리, 상태를 변경하는 작업을 명령이라고 한다.

객체가 외부에 제공하는 행동의 대부분은 쿼리와 명령으로 구성된다.

사용자가 객체 기계의 버튼을 눌러 상태를 변경하거나 상태 조회를 요청하는 것은 객체의 행동을 유발하기 위해 메시지를 전송하는 것과 유사하다.

어떤 사용자도 직접 기계를 열어 내부의 상태에 접근하려고 하지 않는다. 버튼을 누를 뿐.

## 행동이 상태를 결정한다.

상태를 먼저 결정하고 행동을 나중에 결정하는 방법은 설계에 나쁜 영향을 끼친다.

- 캡슐화가 저해된다.
- 객체를 고립시킨다.
- 재사용성이 저하된다.

상태가 아니라 행동에 초점을 맞춰야한다. 객체는 다른 객체와 협력하기 위해 존재한다. 객체의 적합성을 결정하는 것은 상태가 아니라 객체의 행동이다.

협력 안에서 객체의 행동은 책임을 의미한다. (책임 주도 설계)

## 은유와 객체

### 의인화

현실 속에서는 수동적인 존재가 소프트웨어 객체로 구현 될 때는 능동적으로 변한다. 소프트웨어 객체가 현시 객체의 부분적인 특징을 모방하는 것이 아니라 현실 객체가 가지지 못한 추가적인 능력을 보유하게 된다.

이를 의인화라고 부른다.

# 논의사항

---

초기화 시점의 상태를 기반으로 행동을 하는 경우도 설계에 나쁜 영향을 미치는 것 일까요?