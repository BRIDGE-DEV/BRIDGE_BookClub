# 2장 이상한 나라의 객체
## 정리

저자는 아기들을 대상으로 한 실험을 예시로 든다. 이 실험을 통해, 아기들 역시 세상을 객체들의 집합으로 바라본다는 사실을 얻어낸다.

### 객체지향과 인지 능력

객체지향은 세상을 독립적인 객체들로 분해할 수 있는 인간의 인지 능력에 기반을 두고 있다. 이것이 객체지향을 이해하기 쉬운 패러다임이라고 말하는 이유다.

인간은 단순한 객체들로 주변을 분해함으로써 세상을 이해하려고 노력한다.

객체지향의 목적은 현실 세계를 모방하는 것이 아니라 현실 세계를 기반으로 새로운 세계를 창조하는 것이다.

### 객체, 그리고 이상한 나라

**-이상한 나라의 앨리스**

*수학자가 만든 이야기인줄은 몰랐다..*

**-앨리스 객체**

저자는 앨리스를 객체로, 앨리스의 키를 상태로, 앨리스의 키를 조정하는 행위를 행동으로 비유했다. 

앨리스는 상태를 가지며 상태는 변경 가능하다.

앨리스의 상태를 변경시키는 것은 앨리스의 행동이다.

앨리스는 어떤 상태에 있더라도 유일하게 식별 가능하다.

### 객체, 그리고 소프트웨어 나라

객체란 식별 가능한 개체 또는 사물이다. 객체는 구체적인 사물일수도, 추상적인 개념일 수도 있다.

객체는 구별 가능한 식별자, 특징적인 행동, 변경 가능한 상태를 가진다.

**-상태**

- 왜 상태가 필요한가
    
    어떤 행동의 결과는 과거에 어떤 행동들이 일어났었느냐에 의존한다.
    
    상태를 이용하면 과거의 모든 행동 이력을 설명하지 않고도 결과를 쉽게 예측할 수 있다. 또한 현재를 기반으로 객체의 행동 방식을 이해할 수 있다.
    
- 상태와 프로퍼티
    
    숫자, 문자열, 양, 속도, 참/거짓 같은 단순한 값들은 객체가 아니다. 이들은 다른 객체의 특성을 표현하는 데 사용된다. 즉, 다른 객체의 상태를 표현하기 위해 사용된다.
    
    모든 객체의 상태는 단순한 값과 객체의 조합으로 표현할 수 있다.
    
    객체의 상태를 구성하는 모든 특징을 객체의 ‘프로퍼티’라고 한다. 프로퍼티는 변경되지 않고 고정되기 때문에 ‘정적’이다. 프로퍼티 값은 변경되기 때문에 ‘동적’이다.
    
    객체와 객체 사이의 의미 있는 연결을 링크라 하고, 객체는 이를 통해서만 메시지를 주고 받는다.
    
    객체를 구성하는 단순한 값은 ‘속성’이다. 프로퍼티는 속성과 링크, 두 가지 종류의 조합으로 표현할 수 있다.
    
    객체는 자율적인 존재다. 객체는 스스로의 행동에 의해서만 상태가 변경되는 것을 보장함으로써 객체의 자율성을 유지한다.
    

**-행동**

- 상태와 행동
    
    객체의 상태를 변경하는 것은 객체의 자발적인 행동뿐이다.
    
    객체가 취하는 행동은 객체 자신의 상태를 변경시킨다.
    
    행동의 결과는 객체의 상태에 의존적이다.
    
- 협력과 행동
    
    객체의 행동은 객체가 협력에 참여할 수 있는 유일한 방법이다. 이 행동을 하게 만드는 것은 객체가 외부로부터 수신한 메시지이다.
    
- 상태 캡슐화
    
    객체가 외부에 노출하는 것은 행동뿐이며, 외부에서 객체에 접근할 수 있는 유일한 방법 역시 행동뿐이다.
    
    객체의 행동을 유발하는 것은 메시지지만 객체의 상태를 변경할지 여부는 객체가 정한다.
    
    상태를 잘 정의된 행동 집합 뒤로 캡슐화하는 것은 객체의 자율성을 높이고 협력을 유연하게 만든다.
    

**-식별자**

모든 객체는 식별자를 가지며 식별자를 이용해 객체를 구별할 수 있다.

객체가 아닌 단순한 값은 식별자를 가지지 않는다.

### 기계로서의 객체

‘버트란드 마이어’는 기계로 객체를 비유해 설명했다.

버튼을 누르는 것은 기계의 사용자지만 어떤 방식으로 동작할지는 기계 스스로 결정한다.

객체는 버튼으로 제공되는 행동과 디스플레이에 출력되는 상태를 함께 지니며, 상태는 버튼에 의해 유발되는 행동에 의해서만 접근 가능하다.

*이 비유 때문에 정말 이해가 잘 되었다.*

### 행동이 상태를 결정한다

객체지향에 입문한 사람들이 쉽게 빠지는 함정은 상태를 중심으로 객체를 바라보는 것이다.

상태를 먼저 결정하고 행동을 나중에 결정하는 방법은 설계에 나쁜 영향을 끼친다.

1. 상태를 먼저 결정할 경우 캡슐화가 저해된다.
2. 객체를 협력자가 아닌 고립된 섬으로 만든다.
3. 객체의 재사용성이 저하된다.

객체는 다른 객체와 협력하기 위해 존재한다. 객체의 적합성을 결정하는 것은 상태가 아니라 행동이다.

행동을 결정한 후에야 행동에 필요한 정보가 무엇인지를 고려하게 되며, 이 과정에서 필요한 상태가 결정된다.

> 행동이 상태를 결정한다.

### 은유와 객체

**-두 번째 도시전설**

객체지향 세계는 현실 세계의 단순한 모방이 아니다. 소프트웨어 상품은 실제 세계의 상품이 하지 못하는 가격 계산과 같은 행동을 스스로 수행할 수 있다.

모방과 추상화라는 개념만으로는 현실 객체와 소프트웨어 객체 사이를 깔끔히 설명하지 못한다.

**-의인화**

현실 속에서는 수동적인 존재가 소프트웨어 객체로 구현될 때는 능동적으로 변한다.

객체지향 세계를 구축할 때 현실에서 가져온 객체들은 전지전능한 존재가 된다. 현실의 객체보다 많은 일을 할 수 있는 소프트웨어 객체의 특징을 ‘의인화’라고 부른다.

> 모든 생물처럼 소프트웨어는 태어나고, 삶을 영위하고, 그리고 죽는다.

**-은유**

프로그램 내의 객체는 현실 속의 객체에 대한 비유다.

은유 관계에 있는 실제 객체의 이름을 소프트웨어 객체의 이름으로 사용하면 표현적 차이를 줄여 소프트웨어의 구조를 쉽게 예측할 수 있다. 이해하기 쉽고 유지보수가 용이한 소프트웨어를 만들 수 있는 것이다.

**-이상한 나라를 창조하라**

객체지향 설계자로서 우리의 목적은 현실을 모방하는 것이 아니다. 단지 이상한 나라를 창조하기만 하면 된다.

창조한 객체의 특성을 상기시킬 수 있다면 현실 속 객체의 이름을 이용해 객체를 묘사하자.

---

## 느낀 점

‘행동이 상태를 결정한다’라는 부분에서 “아 맞아 이래야하는데!”라는 생각이 들었다. 읽고 나서 짧은 시간 생각했을 뿐인데, 객체의 상태보다 행동을 먼저 결정하는 것이 더 좋은 구조로 이어지겠다고 생각했다. 나도 종종 상태를 먼저 생각했는데, 때문에 상태가 자꾸 노출이 된다던지, 객체 간 링크 형성이 어렵다던지 하는 문제가 많이 발생했다. 객체의 구조를 짤 때 행동이 먼저가 된다면 이런 문제들이 조금은 개선되지 않을까 생각했다. 

## 논의사항

- 여러분들은 객체의 구조를 만드실 때 어떤 과정을 거치시나요?

저는 지금까진 객체에 필요한 상태와 행동을 동시에 생각했습니다. ‘이 객체엔 이 상태를 넣으려 했으니까 이런 행동이 있어야하고, 그럼 또 이 상태가 필요하고… 그럼 이 상태에 대해서 행동을 또 수정해야하고…’ 결국 이러다보면 상태 우선의 구조가 만들어져서, 상태에 따라서 행동을 우겨넣는? 식의 안좋은 구조가 종종 만들어지더라고요.. 앞으로는 한번 행동 필우선식으로 짜보려고 합니다!