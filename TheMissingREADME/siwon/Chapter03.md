# Chapter03

---

### 레거시 코드 변경 알고리즘

1. 변경 지점을 확인
2. 테스트할 지점 확인
3. 의존성 나누기
4. 테스트를 작성하기
5. 변경 적용 리팩터링

의존성을 나누기 위한 리팩터링은 위험한 과정이다. 어쩌면 이미 작성된 테스트까지 바꿔야 한다. 그러면 동작이 바뀌었는지 알아내기가 더 어려워진다.

1. 크고 복잡한 메서드는 더 작은 크기의 메서드로 나눠서 각각 분리된 기능이 독립적으로 테스트 될 수 있게 한다.
2. 인터페이스를 이용해서, 복잡한 객체를 완전하지는 않아도 테스트하기에는 충분한 구현체로 대체할 수 있는 방법을 마련한다.
3. 시간의 흐름같이 제어하기 어려운 실행 환경을 시뮬레이션 할 수 있는 명시적 제어 지점 주입.
4. 접근 제어자 수정 금지.

### 커밋메시지

코드가 '어떻게' 바뀌었는지 보다 **'무슨'** 코드가 **'왜'** 바뀌었는지에 대해서 설명하라.

표준을 바꿀 때는 우선순위, 소유권, 비용, 구현 세부 내역 등 다각도로 고려해야 한다. 실용주의적 사고 하기.

항상 최신 기술이 정답을 가져다 주지 않는다. 그 기술을 적용하는데에도 많은 비용이 소모된다.

회사 입장에서는 신기술을 적용하기 위해 트레이드 오프를 잘해야 하며, 보통 이러한 단점에 못 이겨 평범한 기술을 택함.

코드 재 작성에 대한 욕구를 견디자…

테스트 코드의 중요성을 귀에 딱지가 앉도록 들었지만, 아직 까지도 작성 해본 적 없는 제가 테스트 코드를 작성해본 분께 여쭤봅니다...

# 논의사항

---

리팩터링을 위한 테스트 코드를 작성해본 경험이 있으신가요? 있다면 어떤 상황에서 어떤 절차를 가지고 진행하셨나요. 작업 시간은 얼마나 소요되시나요?