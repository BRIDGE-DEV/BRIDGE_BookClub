# 필독! 개발자 온보딩 가이드

## 10장. 견고한 소프트웨어를 위한 기술 설계 절차

> 대규모 변경에 적합한 소프트웨어 설계와 문서화 기법

대부분의 초급 엔지니어는 어떤 업무를 맡게 되면 바로 코딩을 시작한다. 하지만 그런 방식으로 일하기엔 너무 큰 업무를 여러분도 결국에는 맡게 될 것이다. 그런 상황에 놓이면 견고한 기술 설계에 대해 생각해야 한다.

설계 업무는 혼자서 업무에 대해 깊이 생각해보는 활동과 그룹이 협력해서 논의하는 활동 등 크게 2가지로 나눌 수 있다. 전자는 조사researching, 브레인스토밍, 문서 작성 등의 활동으로 이뤄지는 반면, 후자는 설계에 대해 논의하거나 설계 문서에 의견을 추가하는 등의 활동으로 이뤄진다.

처음엔 지나칠 정도로 신중해야 한다. 기술 리드나 팀장에게 도움을 요청하자. 그리고 여러분의 설계를 다른 사람과도 공유하자. 기술 설계 작업에 참여하고 주도하는 과정을 올바르게 수행하면 보람과 가치를 얻을 수 있다.

### 고깔형의 기술 설계 절차

소프트웨어의 설계란 선형적인 과정이 아닌 나선형 업무에 가깝다.

설계 문서는 과정을 반복할 때마다 더 명확하고 상세해진다.

설계가 승인을 받으면 구현implementation이 시작되지만 그렇다고 해서 설계가 완전히 끝난 것은 아니다. 구현을 하다 보면 계속해서 뜻밖의 일이 발생한다. 여러분과 팀이 코드를 작성하면서 크게 달라지는 부분이 있다면 설계 문서도 반드시 업데이트해야 한다.

### 올바른 기술 설계를 하려면

소프트웨어 설계는 탐구에서 출발한다. 설계를 시작하기 전에 문제 영역과 요구사항을 반드시 이해해야 한다.

#### 문제를 정의하자

가장 먼저 할 일은 해결하고자 하는 문제를 정의하고 이해하는 것이다.

여러분의 방식으로 문제를 다시 표현해보고 이해관계자에게 제시해보자. 여러분이 이해한 내용이 그들이 이해한 내용과 일치하는지 확인하자. 문제가 둘 이상이라면 어떤 문제의 우선순위가 높은지 물어보자.

여러 이해관계자들로부터 문제에 대한 의견을 수집했다면 이제 피드백을 바탕으로 해당 문제를 명확한 문장으로 정의해보자. 문제를 액면 그대로 받아들여서는 안 된다. 문제에 대해 들은 내용을 비판적으로 생각해야 한다.

#### 해결방법을 조사하자

문제를 정의했다고 해서 곧바로 '최종' 설계를 마련하려고 서두르지는 말자. 관련 내용에 대한 조사, 다른 해결책, 트레이드오프 등을 생각해봐야 한다. 여러분이 고안해낼 설계는 최초의 방안이 아니라 최선의 방안이어야 한다.

온라인에 많은 리소스가 널려있다. 다른 사람들은 이와 유사한 문제를 어떻게 해결했는지 살펴보자. 여러분이 찾고 있는 문제 영역의 전문가와도 상의하자. 신중하게 생각하자. 온라인에서 읽는 정보가 모두 좋은 아이디어는 아니다. 가장 보편적인 실수는 자신의 문제와 유사하지만 완전히 같지는 않은 문제의 해결책을 그대로 따르는 것이다.

#### 다양한 실험을 해보자

일단 아이디어가 떠올랐으면 대략적으로 코드를 작성하고 테스트를 실행해서 실험해보자. 이렇게 실험을 해보면 아이디어에 대한 자신감도 생기고 설계상의 트레이드오프를 발견할 수도 있으며 문제 영역을 더 명확하게 정의할 수 있다. 또한 여러분의 코드가 어떻게 사용될지에 대한 감각도 얻게 된다. 프로토타입을 팀과 공유해서 피드백을 받자.

#### 충분한 시간을 투자하자

좋은 설계에는 창의력이 필요하다. 설계는 깊이 생각해야 한다.

집중하는 동안에는 어떤 소통도 하지 말자. 알림을 꺼두고 필요하다면 다른 장소로 이동하자.

그렇다고 확보한 시간을 온통 '설계'에만 사용하지 말고 산책을 하거나 차를 마시는 등의 휴식 시간도 가지자.

### 의사소통을 위한 설계 문서 작성 방안

설계 문서는 아이디어를 명확하게 소통할 수 있는 확장 가능한 방법이다. 문서를 작성하는 과정에서 생각을 정리할 수 있고 약점도 드러날 수 있다. 아이디어를 문서화하는 작업이 항상 수월하지만은 많다. 유용한 설계 문서를 작성하려면 가장 중대한 변경사항에 집중하고 목표와 대상을 유념하면서 글쓰기를 연습하고 문서를 계속 업데이트해야 한다.

#### 중요한 변경사항은 문서화해두자

조직에 설계 리뷰 절차가 없다면 다음과 같은 3가지 조건을 검토해서 설계 문서가 필요한지 여부를 결정하자.

- 프로젝트에 최소 한 달 이상의 엔지니어링 업무가 필요한 경우
- 변경사항이 소프트웨어의 확장 및 유지보수에 오랫동안 영향을 미칠 경우
- 변경사항이 다른 팀에 상당한 영향을 미칠 경우

#### 설계 문서를 작성하는 이유를 이해하자

설계 문서는 여러분이 생각할 수 있게 하고 피드백을 받게 하며 팀에 새로운 정보를 계속 제공하고 신입 엔지니어의 적응을 도우며 팀에 새로운 정보를 계속 제공하고 신입 엔지니어의 적응을 도우며 프로젝트 계획을 추진하는데 도움이 되는 도구다.

문서화는 여러분이 모르는 것을 드러내는 방법이기도 하다. 여러분이 생각하는 설계를 기록하다 보면 문제 영역을 탐구하면서 여러분이 생각하는 바를 더 명확하게 정리할 수 있다. 그러면서 자신이 이해한 내용과 실제 문제 사이의 차이점, 그리고 또 다른 대안도 마주하게 될 것이다. 설계 문서를 기록하면서 생각이 면확하게 정리되면 설계에 대한 논의 또한 더욱 생산적이 된다.

설계를 문서화하면 피드백을 요청하기도 쉬워진다. 문서는 많은 사람에게 공유할 수 있으며, 사람들도 각자 자신의 시간에 맞춰서 문서를 읽고 대응할 수 있다. 피드백이 다소 적더라도 설계 문서를 공유함으로써 팀원들에게 정보를 제공할 수 있다.

#### 글쓰는 법을 배우자

글을 명확하게 쓸 수 있으면 여러분의 삶은 더 수월해진다. 글쓰기는 다소 불완전한 정보 전달 과정이다. 그래서 글을 잘 쓰면 그만큼 전달 과정의 정확도를 높일 수 있다. 게다가 경력에도 도움이 된다.

여러분이 작성한 글을 대상 독자의 관점에서 다시 읽어보자. 그 내용을 독자들이 이해하는가가 중요하다.

#### 설계 문서는 최신 상태로 유지하자

업무를 진행하는 중에는 문서를 계속 업데이트하자. 코드 리뷰를 수행할 때도 사람들이 계속 문서를 업데이트하는지 독려하고 확인하자.

설계 문서의 버전도 관리해야 한다.

### 설계 문서 템플릿의 기본 구조

설계 문서는 현재의 코드 설계, 변경 이유, 고려해 볼 수 있는 여러 해결책과 그중에서 채택하고자 하는 해결책 등을 서술해야 한다. 특히 채택하고자 하는 해결책에는 아키텍처 다이어그램, 주요 알고리즘, 대안과의 트레이드오프, 가설, 의존성 등 상세 내용이 모두 담겨야 한다.

모든 설계 문서에 최적화된 하나의 템플릿은 존재하지 않지만 오픈소스 설계 문서를 참고하면 주요 변경사항을 어떻게 문서화하는지를 엿볼 수 있다.

- 개요
   - 해결하고자 하는 문제와 해결해야 하는 이유
- 현재 상태와 컨텍스트
   - 수정하게 될 아키텍처를 기술하고 용어를 정리
- 변경해야 하는 이유
   - 이 문제를 해결할 때의 가치는 무엇이며 왜 지금 해야하는지, 노력에 비해 얻는 이점이 무엇인지
- 요구사항
   - 사용자 요구사항 / 기술 요구사항 / 보안 및 규제 요구사항
- 고려할 수 있는 해결책
- 채택하려는 해결책
- 설계와 아키텍처
   - 기술의 세부사항 논의
- 테스트 계획
   - 변경사항을 어떻게 검증할 것인지 설명
- 롤아웃 계획
- 미결 사항
   - 아직 해결하지 못한 질문의 목록을 명시적으로 기록
- 부록
   - 추가적으로 설명해야 할 내용

### 설계 과정에서도 협업은 중요하다

팀과 건설적으로 협업하면 더 나은 설계를 구현할 수 있다. 하지만 항상 쉽지만은 않은 것이 협업이다. 개발자의 피드백을 해석하고 압축해서 의미 있는 설계에 녹여내는 것은 결코 쉬운 일이 아니다. 팀의 설계 절차를 따르고, 일찍 자주 소통해서 혼선을 줄이며, 설계 논의를 통해 브레인스토밍을 진행하는 등의 방법으로 협업하면서 설계를 완성하자.

#### 팀의 설계 리뷰 절차를 이해하자

#### 갑작스런 상황은 만들지 말자

사람들에게 설계를 제안할 때는 정중하게 그리고 점진적으로 시도하자.

처음 조사를 시작할 시점에 다른 팀과 기술 리드로부터 일찍이 피드백을 받아보자.

작업의 진행 상황을 사람들에게 계속 공유하자.

#### 설계를 논의하며 브레인스토밍을 하자

설계에 대한 논의는 문제 영역에 대한 이해, 지식 공유, 트레이드오프에 대한 고민, 더 견고한 설계 등에 도움이 된다. 설계에 대한 논의는 문제에 대해서는 어느 정도 이해하고 있지만 설계 방식은 아직 결정되지 않은 시점에 주로 이뤄진다. 브레인스토밍 과정 중에는 각기 다른 참여자들을 초대해 여러 번 진행하면서 다른 관점에서 설계를 들여다볼 수 있어야 한다.

#### 설계에 참여하자

여러분은 본인의 설계뿐만 아니라 팀의 설계 업무에도 참여해야 한다. 마치 코드 리뷰처럼 설계에 참여하는 상황이 편치는 않을 수 있다. 여러분보다 경험 많은 개발자가 설계를 주도한다면 여러분은 기여할 것이 없다고 생각할 수도 있다. 그래도 참여하자. 여러분의 참여는 팀의 설계를 개선하는 데 도움이 될 뿐만 아니라 다른 배움을 얻을 수 있는 기회도 된다.

설계에 합류하게 되면 의견은 제안하고 궁금한 것은 물어보자. 코드 리뷰와 동일한 가이드라인을 따르면 된다. 설계에 대해 전반적으로 생각해야 한다. 보안, 유지보수 용이성, 성능, 확장 등도 고려해야 한다.

질문하기는 제안만큼이나 중요하다. 질문을 함으로써 스스로 더 성장하게 된다. 학교에서 그랬듯이 설계 논의 중에서도 궁금증을 지닌 사람은 여러분만이 아닐 것이다. 여러분의 질문은 다른 사람의 성장에도 도움이 된다. 게다가 여러분의 질문으로 새로운 아이디어가 발현되거나 설계 과정에서 미처 고려하지 못한 부분을 찾아낼 수도 있다.

<br>

### 생각

챕터명만 봤을 때는 두렵고 별로 읽고 싶지 않았다.
하지만 현재 새 시스템 구현을 앞두고서 읽으니 조금은 도움이 됐을지도 모르겠다.
이번에 구현부터 대충 시작하려고 했는데 설계를 조금 더 고민해보고, 그 설계를 같은 팀 프로그래머들과 나눠 의견을 잘 구해봐야겠다는 생각이 든다.