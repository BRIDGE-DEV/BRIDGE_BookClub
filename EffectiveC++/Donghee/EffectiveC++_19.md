# 챕터4: 설계 및 선언

## 항목 19: 클래스 설계는 타입 설계와 똑같이 취급하자

C++에서 새로운 클래스를 정의한다는 것은 새로운 타입을 하나 정의하는 것과 같다. 함수와 연산자 오버로드, 메모리 할당 및 해제, 객체 초기화 및 종료처리, 이 모두가 우리의 손에 달려 있다.

좋은 타입은 문법이 자연스럽고, 의미구조가 직관적이며, 효율적인 구현이 한 가지 이상 가능해야 한다. 좋은 타입을 만들 때 고려해야 하는 사항들을 알아보자.

- 새로 정의한 타입의 객체 생성/소멸은 어떻게 이뤄져야 하는가?
    - 이 부분에 따라 생성자/소멸자의 설계가 바뀐다.
- 객체 초기화는 객체 대입과 어떻게 달라야 하는가?
    - 이는 생성자와 대입 연산자의 동작 및 둘 사이의 차이점을 결정짓는 요소다.
- 새로운 타입으로 만든 객체가 값에 의해 전달되는 경우엔 어떤 결과를 가져오나?
    - 값에 의한 전달을 구현하는 쪽은 복사 생성자라는 것을 기억하자.
- 새로운 타입이 가질 수 있는 값의 제약은 무엇인가?
    - 전부는 아니지만, 데이터 멤버의 몇 가지 조합 값만은 반드시 유효해야 한다. 이 조합을 가리켜 클래스의 불변속성이라고 한다. 이는 클래스 차원에서 지켜줘야 한다.
- 기존의 클래스 상속 계통망에 맞출 것인가?
    - 만든 클래스를 다른 클래스들이 상속할 수 있게 만들자고 결정했다면, 이에 따라 멤버 함수의 가상 함수 여부가 결정된다. 소멸자의 경우를 유의하자. (다형성을 가질 시 가상 소멸자)
- 어떤 종류의 타입 변환을 허용할 것인가?
    - 암시적으로 변환되도록 만들고 싶다면, 타입 변환 함수를 넣어두자. (operator T2)
    - 명시적 타입 변환만 허용하고 싶을 경우엔, 해당 변환을 맡는 별도 이름의 함수를 만들자.
- 어떤 연산자와 함수를 두어야 의미가 있을까?
- 표준 함수들 중 어떤 것을 허용하지 말 것인가? (private)
- 새로운 타입의 멤버에 대한 접근권한을 어느 쪽에 줄 것인가?
    - 어떤 클래스 멤버를 public, protected, private 영역에 둘 것인가를 결정하는 데 이 질문이 도움을 줄 것이다.
- ‘선언되지 않은 인터페이스’로 무엇을 둘 것인가?
    - 타입이 제공할 보장이 어떤 것일지를 의미한다. 보장할 수 있는 부분은 성능, 예외 안전성, 자원 사용이다.
- 새로 만드는 타입이 얼마나 일반적인가?
    - 정의하는 것이 타입 하나가 아니라 동일 계열의 타입군 전체일 수도 있다. 그럴 때는 새로운 클래스 템플릿을 정의하자.
- 정말로 꼭 필요한 타입인가?
    - 기능 몇 개가 아쉬워 파생 클래스를 뽑는다면, 차라리 비멤버 함수나 템플릿을 몇 개 더 정의하는 편이 낫다.

> 클래스 설계는 타입 설계다.