# 7장 인수 테스트

## 정리

의사소통 또한 프로 개발자의 임무다. 입력이 형편없으면 출력도 형편없다.

### 요구사항 관련 의사소통

프로그래머와 사업부 사이의 가장 흔한 의사소통 쟁점은 요구사항이다.

현실에서는 요구사항 관련 의사소통은 엄청나게 어렵고, 그 과정에는 오류가 가득하다.

어떤 기능에 대한 고객들의 예상은 실제로 구현하고 보면 틀린 경우도 꽤 있다.

### 시기상조의 정밀도

사업부는 프로젝트를 승인하기 전에 일이 어떻게 진행될지 정확히 알고 싶어한다.

반면 개발자들은 프로젝트를 추정하기 전에 어떤 제품을 만들어야 할지 정확히 알고 싶어한다.

양쪽이 원하는 정밀도는 불가능하다.

### 불확실성의 원칙

서류와 실제 시스템 동작은 다르다.

요구사항이 정밀해질수록 최종 구현된 시스템과 초기 요구사항의 차이는 더 벌어진다.

*불확실해야 더 확실하게 나아갈 수 있다.. 정말 모순적이지만 맞는 말이라고 생각한다.*

### 불안한 추정

요구사항은 반드시 바뀌기 때문에 초기 정밀도는 고려할 가치가 없다.

프로 개발자는 정밀도가 낮은 요구사항을 바탕으로 추정해야 할 때가 많다.

이를 보강하려고 항상 추정에 오차범위를 추가해 사업부에서 불확실성을 이해하게 만든다.

### 때늦은 모호함

프로 개발자들은 개발 직전까지도 요구사항에 살을 붙이지 않는다.

이러다 보면 때늦은 모호함으로 이어지게 된다.

의견이 어긋나는 경우에는, 의견 불일치를 해결하기 보다는 매끄러운 말솜씨로 우회하는 게 더 쉽다.

요구사항에서 모든 모호함을 제거하는 일이 프로 개발자의 책임이다.

### 인수 테스트

인수 테스트는 요구사항이 언제 완료 되는지를 정의하기 위해 이해당사자들과 프로그래머들이 힘을 모아 작성하는 테스트다.

### ‘완료’에 대한 정의

> 어떤 팀은 ‘완료’와 ‘완료-완료’라는 용어를 사용했다.

완료란 모든 코드를 작성했고, 모든 테스트를 통과헀으며, QA 전문과와 이해당사자들이 이를 인수했다는 뜻이다.

### 의사소통

인수 테스트의 목적은 소통, 명확성 및 정밀성이다. 개발자, 이해당사자 및 테스터 모두 동의함으로써 시스템 행동을 위한 계획을 이해한다.

### 자동화

인수 테스트는 언제나 자동화해야 한다.

수작업 테스트는 사람이 실행하기 때문에 경제적 타당성이 없는데 반해, 자동화한 인수 테스트는 비용이 매우 저렴하다.

### 추가 작업

이런 테스트를 만드는 것은 시스템의 명세(spec)를 명확히 하는 작업이다.

테스트를 추가 작업으로 보지 말고 많은 시간과 비용에 대한 절약으로 보자.

### 누가, 언제 인수 테스트를 작성하는가?

인수 테스트는 ‘늦은 정밀성’의 원칙에 따라 보통 기능 구현 며칠 전에 가능한 늦게 작성해야 한다.

반복 주기의 중간 지점에는 모든 인수 테스트가 준비돼야 한다.

### 개발자의 역할

기능 구현 작업은 그 기능의 인수 테스트가 준비되면 시작한다.

시스템에 인수 테스트를 연결한 다음 테스트를 통과시키는 것은 개발자의 몫이다.

### 테스트 협상과 수동적 공격성

테스트 저자들이 보다 나은 테스트를 만들도록 협상하는 것은 프로 개발자의 일이다.

팀이 최상의 소프트웨어를 만드는 데 도움을 주는 것이 프로의 일이다. 모든 이가 오류와 실수를 살펴서 그것들을 함께 바로 잡아야 한다.

### 인수 테스트와 단위 테스트

인수 테스트는 단위 테스트가 아니다.

단위 테스트는 프로그래머가 프로그래머를 위해 만든다.

인수 테스트는 사업부를 위해 사업부가 작성한다.

같은 내용을 테스트할지라도, 단위 테스트는 시스템 내부로 파고든다. 인수 테스트는 좀 더 원거리에서 시스템을 호출한다.

### GUI 및 다른 문제점

GUI는 제대로 명세하기 어렵다. GUI는 항상 변화한다.

다른 이유로 바뀌는 것들은 분리하고, 같은 이유로 바뀌는 것들은 함께 모아야 한다.

> 그리도 컨트롤 4줄 3열에 있는 버튼을 선택하기 보다 ID가 ok_button인 버튼을 선택하는 테스트를 작성하는 편이 훨씬 낫다.

### 올바른 인터페이스를 통한 테스트

GUI를 통하는 것보다 실제 API를 통해 기본 시스템의 기능을 불러오는 테스트를 작성하라.

GUI는 변화할 가능성이 커서 GUI를 통한 테스트는 취약해지기 쉽다.

GUI 테스트를 최소한으로 유지하라.

### 지속적 통합

지속적 통합 시스템을 통해 모든 테스트를 하루에 몇 번이라도 실행할 수 있도록 하라.

### 출시를 멈춰라

테스트가 실패하는 것은 ‘출시 중단’ 이벤트다.

### 결론

세부사항에 대한 의사소통은 어렵다.

> 서로에게 말없이 손만 흔든 다음 상대방이 이해했을 거라 가정해 버리면 일은 너무 쉬워진다.

*세부사항말고 그냥 의사소통도 어려운데요…*

---

## 느낀 점

의사소통은 어렵다. 어렵다. 어렵다……….. 동료 프로그래머가 되었든, 다른 사업부가 되었든, 솔직하고 명확하게 내 의사를 전달하는 것이 가장 중요하다고 본다. 요즘 이런저런 사회생활을 하면서 의식적으로 솔직하게 의사를 전달하는 연습을 하고 있는데, 생각보다 괜찮은 것 같아서 다행이다.

---

## 논의사항

- 자신이 구현한 기능이 요구했던 사람의 생각과 달랐던 경험, 혹은 그 반대의 경험이 있으신가요?

저는 팀 프로젝트에서 팀장을 맡아서 제가 기능을 요구하는 상황이었는데, 모호하게 말해서 완전 다른 기능이 나왔던 경우가 있네요. 모호하게 말했던 저와, 제 모호한 말을 대충 어림짐작했던 팀원 둘 다 잘못한 경우였던 것 같습니다.